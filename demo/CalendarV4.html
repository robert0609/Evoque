<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">
    <title></title>
    <script type="text/javascript" src="../src_v2.0.0/js/Evoque.js"></script>
    <script type="text/javascript" src="../src_v2.0.0/js/Evoque.Cache.js"></script>
    <script type="text/javascript" src="../src_v2.0.0/js/Evoque.CalendarV4.js"></script>
    <script type="text/javascript" src="../src_v2.0.0/js/Evoque.DockFormV2.js"></script>
    <script type="text/javascript" src="../src_v2.0.0/js/Evoque.Dialog.js"></script>
    <link rel="stylesheet" type="text/css" href="../src_v2.0.0/style/Evoque.Dialog.css" />
    <link rel="stylesheet" href="../src_v2.0.0/style/webapp.css">
    <link rel="stylesheet" type="text/css" href="../src_v2.0.0/style/Evoque.CalendarV4.css" />
    <script type="text/javascript">
        function show() {
            $('#dock').dockFormV2.popup();
        }
        $(function () {
            $('#a').calendarV4.create({
                startDate: new Date(2017, 4, 8),
                displayMode: 'waterfall',
                pickMode: 'range',
                timezoneOffset: -11,
                onRenderDateTd: function (arg) {
                    //var td = arg.renderTarget;
                    //var $td = $(td);
                    //var tdDate = arg.tdDate;
                    //var tder = arg.controller;
                    //var today = (new Date()).getYMD();
                    //var minus = tdDate - today;
                    //if (minus == 0)
                    //{
                    //    tder.today();
                    //    tder.title = '今日';
                    //}
                    //else if (minus == 86400000)
                    //{
                    //    tder.today();
                    //    tder.title = '明日';
                    //}
                },
                onCancel: function () {
                    $('#dock').dockFormV2.packup();
                }
            });
            $('#a')[0].style.height = (document.documentElement.clientHeight - 45) + 'px';
            //$('#a').calendarV4.setActiveDate(new Date(2016, 5, 1), new Date(2016, 5, 2));

            $('#dock').dockFormV2.init({
                content: 'a',
                onPopup: function () {
                    $('#a').calendarV4.adaptFrame(document.documentElement.clientHeight - 45);
                    console.debug('show');
                },
                onPackup: function () {
                    console.debug('hide');
                }
            });


        });
    </script>
</head>
<body>
    <button onclick="show();">show</button>
    <div id="dock" style="top:45px;position:absolute;width:100%;">
    </div>
    <div id="a" style="display: none;"></div>
</body>
</html>